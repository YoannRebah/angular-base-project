<div class="container">
    <form class="container forms" [formGroup]="contactForm" (ngSubmit)="onSubmitContactForm()">
        <fieldset>
            <legend class="text-shadow-glitch-2">Identité</legend>
            <div class="container container-form-flex">
                <div class="col-flex-1">
                    <div class="col-input">
                        <label for="input-lastName">Nom<sup>*</sup></label>
                        <input type="text" autocomplete="off" placeholder="Martin" tabindex="1" formControlName="lastName"
                        [ngClass]="{'input-error': contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched}"
                        >
                        <div *ngIf="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched" class="error-message">
                            <small *ngIf="contactForm.get('lastName')?.errors?.['required']">Information requise</small>
                        </div>
                    </div>
                    <div class="col-input">
                        <label for="input-firstName">Prénom<sup>*</sup></label>
                        <input type="text" autocomplete="off" placeholder="Julie" tabindex="2" formControlName="firstName"
                        [ngClass]="{'input-error': contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched}"
                        >
                        <div *ngIf="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched" class="error-message">
                            <small *ngIf="contactForm.get('firstName')?.errors?.['required']">Information requise</small>
                        </div>
                    </div>
                </div>
                <div class="col-flex-1">
                    <div class="col-input">
                        <label for="input-email">E-mail<sup>*</sup></label>
                        <input type="mail" autocomplete="off" placeholder="julie.martin@gmail.com" tabindex="3" formControlName="email"
                        [ngClass]="{'input-error': contactForm.get('email')?.invalid && contactForm.get('email')?.touched}"
                        >
                        <div *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="error-message">
                            <small *ngIf="contactForm.get('email')?.errors?.['required']">Information requise</small>
                            <small *ngIf="contactForm.get('email')?.errors?.['email']">Le format est invalide</small>
                        </div>
                    </div>
                    <div class="col-input">
                        <label for="input-tel">Téléphone<sup>*</sup></label>
                        <input type="tel" autocomplete="off" placeholder="06 01 02 03 04" tabindex="4" formControlName="tel"
                        [ngClass]="{'input-error': contactForm.get('tel')?.invalid && contactForm.get('tel')?.touched}"
                        >
                        <div *ngIf="contactForm.get('tel')?.invalid && contactForm.get('tel')?.touched" class="error-message">
                            <small *ngIf="contactForm.get('tel')?.errors?.['required']">Information requise</small>
                            <small *ngIf="contactForm.get('tel')?.errors?.['pattern']">Le format est invalide</small>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend class="text-shadow-glitch-2">Entreprise</legend>
            <div class="container container-form-flex">
                <div class="col-flex-1">
                    <div class="col-input">
                        <label for="input-compagny-name">Dénomination<sup>*</sup></label>
                        <input type="text" autocomplete="off" placeholder="Carrefour" tabindex="5" formControlName="compagnyName"
                        [ngClass]="{'input-error': contactForm.get('compagnyName')?.invalid && contactForm.get('compagnyName')?.touched}"
                        >
                        <div *ngIf="contactForm.get('compagnyName')?.invalid && contactForm.get('compagnyName')?.touched" class="error-message">
                            <small *ngIf="contactForm.get('compagnyName')?.errors?.['required']">Information requise</small>
                        </div>
                    </div>
                </div>
                <div class="col-flex-1">
                    <div class="col-input">
                        <label for="input-compagny-post">Rôle dans l'entreprise</label>
                        <input type="text" autocomplete="off" placeholder="Chargé(e) de recrutement" tabindex="6" formControlName="compagnyPost">
                    </div>
                </div>
            </div>
            <div class="container container-form-flex">
                <div class="col-flex-1">
                    <div class="col-input">
                        <label for="dropdown-compagny-location">Localisation</label>
                        <select id="dropdown-compagny-location" name="compagny-location" tabindex="7" formControlName="compagnyLocation">
                            <ng-container *ngFor="let region of locationsFr | keyvalue">
                              <optgroup [label]="region.key">
                                <option *ngFor="let department of region.value" [value]="department.nom + ' - ' + department.code">{{ department.nom }}</option>
                              </optgroup>
                            </ng-container>
                        </select>
                    </div>
                </div>
                <div class="col-flex-1"></div>
            </div>
        </fieldset>
        <fieldset>
            <legend class="text-shadow-glitch-2">Message</legend>
            <div class="container container-form-flex">
                <div class="col-flex-1">
                    <div class="col-input">
                        <div class="container row-form flex-column">
                            <textarea id="textarea-message" name="contact-message" placeholder="Bonjour, pouvez-vous me recontacter..." tabindex="8" formControlName="message"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <div class="container-submit">
            <button class="btn btn-submit" tabindex="9" type="submit">
                <div *ngIf="sendIsPending" class="loader-packman"></div>
                <span *ngIf="!sendIsPending">Envoyer</span>
            </button>
        </div>
    </form>
    <div *ngIf="popinContactFormIsVisible" class="popin-contact-form" [class]="mailSendWithSuccess ? 'message-success' : 'message-error'">
        <div class="container-message">
            <p *ngIf="mailSendWithSuccess" class="text-shadow-glitch-2">Le formulaire a été transmis avec succès&nbsp;!</p>
            <p *ngIf="!mailSendWithSuccess" class="text-shadow-glitch-2">Aïe... Il y a eu un problème lors de l'envoi du formulaire...</p>
        </div>
    </div>
</div>