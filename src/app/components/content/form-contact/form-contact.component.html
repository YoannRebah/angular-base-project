<div class="container">
    <form class="forms relative flex flex-col gap-10" [formGroup]="contactForm" (ngSubmit)="onSubmitContactForm()">
        <!-- Identité -->
        <fieldset>
            <legend class="text-shadow-chromatic-glitch mb-6 text-2xl font-light border-b-2 border-cyan w-full">Identité</legend>
            <div class="relative flex flex-col gap-4">
                <div class="flex flex-col gap-10 md:flex-row">
                    <div class="relative flex flex-col flex-1">
                        <label class="relative mb-1 font-medium" for="input-lastName">Nom<sup>*</sup></label>
                        <input class="text-black p-2 outline-4 focus:outline-cyan" id="input-lastName" name="lastName" type="text" autocomplete="off" placeholder="Martin" tabindex="1" formControlName="lastName"
                        [ngClass]="{'outline-pink-important': contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched}"
                        >
                        <div *ngIf="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched" class="absolute right-0 text-pink">
                            <small *ngIf="contactForm.get('lastName')?.errors?.['required']">Information requise</small>
                        </div>
                    </div>
                    <div class="relative flex flex-col flex-1">
                        <label class="relative mb-1 font-medium" for="input-firstName">Prénom<sup>*</sup></label>
                        <input class="text-black p-2 outline-4 focus:outline-cyan" id="input-firstName" name="firstName" type="text" autocomplete="off" placeholder="Julie" tabindex="2" formControlName="firstName"
                        [ngClass]="{'outline-pink-important': contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched}"
                        >
                        <div *ngIf="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched" class="absolute right-0 text-pink">
                            <small *ngIf="contactForm.get('firstName')?.errors?.['required']">Information requise</small>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col gap-10 md:flex-row">
                    <div class="relative flex flex-col flex-1">
                        <label class="relative mb-1 font-medium" for="input-email">E-mail<sup>*</sup></label>
                        <input class="text-black p-2 outline-4 focus:outline-cyan" id="input-email" name="email" type="mail" autocomplete="off" placeholder="julie.martin@gmail.com" tabindex="3" formControlName="email"
                        [ngClass]="{'outline-pink-important': contactForm.get('email')?.invalid && contactForm.get('email')?.touched}"
                        >
                        <div *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="absolute right-0 text-pink">
                            <small *ngIf="contactForm.get('email')?.errors?.['required']">Information requise</small>
                            <small *ngIf="contactForm.get('email')?.errors?.['email']">Le format est invalide</small>
                        </div>
                    </div>
                    <div class="relative flex flex-col flex-1">
                        <label class="relative mb-1 font-medium" for="input-tel">Téléphone<sup>*</sup></label>
                        <input class="text-black p-2 outline-4 focus:outline-cyan" id="input-tel" name="tel" type="tel" autocomplete="off" placeholder="06 01 02 03 04" tabindex="4" formControlName="tel"
                        [ngClass]="{'outline-pink-important': contactForm.get('tel')?.invalid && contactForm.get('tel')?.touched}"
                        >
                        <div *ngIf="contactForm.get('tel')?.invalid && contactForm.get('tel')?.touched" class="absolute right-0 text-pink">
                            <small *ngIf="contactForm.get('tel')?.errors?.['required']">Information requise</small>
                            <small *ngIf="contactForm.get('tel')?.errors?.['pattern']">Le format est invalide</small>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <!-- Entreprise -->
        <fieldset>
            <legend class="text-shadow-chromatic-glitch mb-6 text-2xl font-light border-b border-cyan w-full">Entreprise</legend>
                <div class="relative flex flex-col gap-4">
                    <div class="relative flex flex-col gap-4">
                        <div class="flex flex-col gap-10 md:flex-row">
                            <div class="relative flex flex-col flex-1">
                                <label class="relative mb-1 font-medium" for="input-compagny-name">Dénomination<sup>*</sup></label>
                                <input class="text-black p-2 outline-4 focus:outline-cyan" id="input-compagny-name" name="compagny-name" type="text" autocomplete="off" placeholder="Carrefour" tabindex="5" formControlName="compagnyName"
                                [ngClass]="{'outline-pink-important': contactForm.get('compagnyName')?.invalid && contactForm.get('compagnyName')?.touched}"
                                >
                                <div *ngIf="contactForm.get('compagnyName')?.invalid && contactForm.get('compagnyName')?.touched" class="absolute right-0 text-pink">
                                    <small *ngIf="contactForm.get('compagnyName')?.errors?.['required']">Information requise</small>
                                </div>
                            </div>
                            <div class="relative flex flex-col flex-1">
                                <label class="relative mb-1 font-medium" for="input-compagny-post">Rôle dans l'entreprise</label>
                                <input class="text-black p-2 outline-4 focus:outline-cyan" id="input-compagny-post" name="compagny-post" type="text" autocomplete="off" placeholder="Chargé(e) de recrutement" tabindex="6" formControlName="compagnyPost">
                            </div>
                        </div>
                    </div>
                    <div class="relative flex flex-col">
                        <div class="flex flex-col gap-10 md:flex-row">
                            <div class="relative flex flex-col flex-1">
                                <label class="relative mb-1 font-medium" for="dropdown-compagny-location">Localisation</label>
                                <select class="text-black p-2 outline-4 focus:outline-cyan" id="dropdown-compagny-location" name="compagny-location" tabindex="7" formControlName="compagnyLocation">
                                    <ng-container *ngFor="let region of locationsFr | keyvalue">
                                    <optgroup [label]="region.key">
                                        <option *ngFor="let department of region.value" [value]="department.code">{{ department.nom }}</option>
                                    </optgroup>
                                    </ng-container>
                                </select>
                                <img *ngIf="showLocationGif" class="absolute w-[2rem] left-[-5%] bottom-[4%]" src="assets/gif/heart-love.gif" alt="Bon choix">
                            </div>
                            <div class="relative flex flex-col flex-1"></div>
                        </div>
                    </div>
                </div>
        </fieldset>
        <!-- Message -->
        <fieldset>
            <legend class="text-shadow-chromatic-glitch mb-6 text-2xl font-light border-b border-cyan w-full">Message</legend>
            <div class="relative flex">
                <textarea class="text-black p-2 resize-none w-full" id="textarea-message" name="contact-message" placeholder="Bonjour, pouvez-vous me recontacter..." tabindex="8" formControlName="message"></textarea>
            </div>
        </fieldset>
        <!-- submit -->
        <div class="container-submit flex-center-center mt-6">
            <button class="btn btn-submit flex-center-center w-[150px] p-2 border-2 border-cyan" tabindex="9" type="submit">
                <div *ngIf="sendIsPending" class="loader-packman"></div>
                <span *ngIf="!sendIsPending">Envoyer</span>
            </button>
        </div>
    </form>
    
    <!-- popins -->
    <app-popin  id="popin-form-sent-success" position="fixed" img="mail" title="Demande de contact" text="Le mail a bien été transmis. Merci !"></app-popin>
    <app-popin id="popin-form-sent-error" position="fixed" img="error" title="Demande de contact" text="Aïe... Il y a eu une erreur lors de l'envoi du mail..."></app-popin>
</div>